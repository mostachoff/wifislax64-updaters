#!/bin/sh

# Script by www.seguridadwireless.net

SCRIPT_VERSION=20190719

############################################################
## Funciones comunes. Su nombre empieza por f_ ##
############################################################
f_variables(){
	. /opt/wifislax-updaters/Funciones/funciones_updater
}

############################################################
## Funciones propias del script. Su nombre empieza por F_ ##
############################################################
# Definicion de variables
F_variables() {
	PRGNAM=transcode
	EXTENSION=tar.bz2
	GESTOR=wget
	echo -ne "\033]2;${PRGNAM}_updater\007"
	WEB=https://sources.archlinux.org/other/community/$PRGNAM
	VERSION=$(curl -s $WEB/|grep .bz2|head -1|cut -d- -f 3|cut -d t -f1|sed "s/.$//g")
	SOURCES=$PRGNAM-$VERSION.$EXTENSION
	CD=$PRGNAM-$VERSION
	DOWNLOAD=$WEB/$SOURCES
}

# Comprobar dependencias
F_dependencias(){
DEPENDENCIAS="ffmpeg faac lame libdv libmpeg2 mjpegtools libquicktime x264 xvidcore"
f_dependencias
}

# Descomprimimos el fichero descargado y compilamos
F_compilar(){
echo 
echo "$VERDE"Aplicando parches ..."$CIERRE"
sleep 1

echo "
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
KLHEZ/sCAAAAAARZWg=="|base64 -d > $TMP/patches.txz

tar xvf $TMP/patches.txz &>/dev/null

patch -p1 -i ./patches/transcode-ffmpeg3.patch||exit 1
patch -p1 -i ./patches/transcode-ffmpeg4.patch||exit 1
sed -e 's|freetype/ftglyph.h|freetype2/freetype/ftglyph.h|' -i filter/subtitler/load_font.c
patch -p1 -i ./patches/transcode-swresample.patch||exit 1

echo 
echo "$VERDE"Configurando paquete ..."$CIERRE"
sleep 1

autoreconf -vi

CFLAGS="$SLKCFLAGS" \
CXXFLAGS="$SLKCFLAGS" \
LDFLAGS="-L/usr/lib${LIBDIRSUFFIX}" \
./configure \
  --prefix=/usr \
  --libdir=/usr/lib${LIBDIRSUFFIX} \
  --sysconfdir=/etc \
  --localstatedir=/var \
  --docdir=/usr/doc/$PRGNAM-$VERSION \
  --mandir=/usr/man \
  --enable-alsa \
  --enable-v4l \
  --enable-libv4l2=yes \
  --enable-libv4lconvert=yes \
  --enable-libmpeg2=yes \
  --enable-libmpeg2convert=yes \
  --enable-ogg \
  --enable-vorbis \
  --enable-theora \
  --enable-x264=yes \
  --enable-xvid=yes \
  --enable-faac=yes \
  --enable-freetype2 \
  --enable-sdl \
  --enable-libxml2 \
  --enable-libdv=yes \
  --enable-libquicktime=yes \
  --enable-mjpegtools=yes \
  --enable-a52=yes \
  --enable-lame=yes \
  --enable-nuv \
  --enable-lzo \
  --enable-libpostproc \
  --enable-imagemagick \
  --build=$ARCH-slackware-linux
  
echo 
echo "$VERDE"Compilando paquete ..."$CIERRE"
sleep 1

make || exit 1
make DESTDIR=$PKG install || exit 1

# Install headers
mkdir -p $PKG/usr/include/transcode/{aclib,avilib,libtc,libtcaudio,libtcvideo}
install -m 644 src/*.h $PKG/usr/include/transcode/
install -m 644 aclib/*.h $PKG/usr/include/transcode/aclib/
install -m 644 avilib/*.h $PKG/usr/include/transcode/avilib/
install -m 644 libtc/*.h $PKG/usr/include/transcode/libtc/
install -m 644 libtcaudio/*.h $PKG/usr/include/transcode/libtcaudio/
install -m 644 libtcvideo/*.h $PKG/usr/include/transcode/libtcvideo/
install -m 644 config.h $PKG/usr/include/transcode/

# remove filters shipped by other packages
rm -f $PKG/usr/lib$LIBDIRSUFFIX/transcode/filter_{stabilize,transform}.*

# Hay un bug que no respeta el docdir y lo eliminamos a mano
if [ -d $PKG/usr/share/doc ]; then
rm -rf $PKG/usr/share/doc
fi
}

###################################
## BLOQUE PRINCIPAL DE EJECUCION ##
###################################
# Si se cierra el script inesperadamente, ejecutar la funcion de limpieza
trap f_exitmode SIGHUP SIGINT

#Inicializamos las variables globales
f_variables
#Comprobamos conexion a Internet
f_comprobarConexion
#Inicializamos las variables del script
F_variables
#Creamos directorio de trabajo
f_directorioTemporal
#Mostramos el mensaje de presentacion
f_presentacion
#Comprobamos updates del script
f_comprobarUpdates
#Asignamos o detectamos arquitectura
f_arquitectura
#Comprobamos version instalada del paquete
f_versionInstalada
# Comprobar dependencias
F_dependencias
#Si no existe el fichero se descargara
f_download
#Descomprimir sources
f_descomprimir
#Cd a ruta
f_cd
#Descomprimir fichero descargado y compilamos
F_compilar
#Hacemos strip sobre el paquete
f_strip
#Creamos xzm , instalamos y salimos
f_tareasFinales